---
date: 2026-02-27
github_issue: 455
github_url: https://github.com/cdubiel08/ralph-hero/issues/455
plan_document: thoughts/shared/plans/2026-02-27-GH-0455-remove-admin-tools-merge-advance.md
status: approved
type: critique
---

# Plan Critique: GH-455 Remove Setup/Admin Tools and Merge advance_issue

## Overall Assessment: APPROVED

The plan is well-structured, technically accurate, and ready for implementation with minor observations noted below. The scope is clearly bounded, line number references are accurate within expected tolerances, and the implementation approach (mechanical deletion + one merge) is appropriate for an XS estimate.

## Completeness

**Strong points:**
- All 16 zero-usage tools are individually listed with file locations and approximate line numbers
- The `advance_issue` merge is well-specified with schema, direction enum, and handler dispatch logic
- Clear ordering: create new tool first, then remove old tools, then clean up files and imports
- Test strategy covers both removal of old tests and creation of new `advance_issue` tests
- Phase boundary awareness is explicit (what NOT to touch from Phases 1-3)

**No gaps identified in tool enumeration.** Verified all 10 tools in `project-management-tools.ts`, 3 in `project-tools.ts`, 2 in `view-tools.ts`, 1 in `routing-tools.ts`, 1 in `sync-tools.ts`, and 3 in `relationship-tools.ts` (`list_dependencies`, `advance_children`, `advance_parent`) exist at the stated locations.

## Feasibility

### Line Number Verification (all confirmed)

| Claim | Actual | Status |
|-------|--------|--------|
| `list_dependencies` at ~457-551 | 457-551 | Exact match |
| `advance_children` at ~642-849 | 642-849 | Exact match |
| `advance_parent` at ~855-1097 | 855-1097 | Exact match |
| `remove_from_project` at ~131 | 131 | Exact match |
| `create_status_update` at line 1258 | 1258 | Exact match |
| `list_project_repos` at ~1102 | 1100 (comment), 1103 (registration) | ~2 lines off, within tolerance |
| `index.ts` imports at 19, 26, 27 | 19, 26, 27 | Exact match |
| `index.ts` register calls at 332, 353, 356 | 332, 353, 356 | Exact match |

### `advance_issue` Merge Feasibility

Confirmed both handler bodies are self-contained within their `server.tool()` blocks. The `advance_children` handler uses `resolveFullConfig`, `ensureFieldCache`, `getCurrentFieldValue`, `updateProjectItemField`, `syncStatusField`. The `advance_parent` handler uses the same helpers. Both import paths are already available in `relationship-tools.ts`. The merge is indeed mechanical.

### File Deletion Feasibility

- `view-tools.ts`: Confirmed contains exactly 2 tools (`list_views`, `update_field_options`), both being removed. Safe to delete.
- `sync-tools.ts`: Confirmed contains exactly 1 tool (`sync_across_projects`). Safe to delete.
- `routing-tools.ts`: Confirmed contains exactly 1 tool (`configure_routing`). Safe to delete.

### Test Files Requiring Attention

Confirmed these test files reference removed tools:
- `advance-children.test.ts` -- references `advance_children`, `advance_parent`
- `project-number-override.test.ts` -- references `advance_children`, `advance_parent`
- `sync-tools.test.ts` -- imports `buildSyncAuditBody`, `detectSyncAuditMarker` from sync-tools
- `routing-tools.test.ts` -- tests for `configure_routing`
- `routing-engine.test.ts` -- tests for routing engine lib
- `routing-types.test.ts` -- tests for routing types lib
- `routing-config.test.ts` -- tests for routing config lib

## Observations (non-blocking)

### 1. Dead Library Code from Routing Removal

The plan correctly identifies `routing-tools.ts` for deletion but does not mention the supporting library files that become dead code:
- `src/lib/routing-engine.ts` (only imported by `routing-tools.ts`)
- `src/lib/routing-types.ts` (only imported by `routing-engine.ts` and `routing-tools.ts`)
- `src/lib/routing-config.ts` (only imported by test files)

And their corresponding test files:
- `__tests__/routing-engine.test.ts`
- `__tests__/routing-types.test.ts`
- `__tests__/routing-config.test.ts`

**Recommendation**: The implementer should delete these as part of steps 8 and 10a, since they serve no purpose after `routing-tools.ts` is removed. Alternatively, this could be deferred to Phase 6 cleanup. Either approach is acceptable -- the build will still pass since they are leaf modules.

### 2. `sync-tools.ts` Exports

The plan correctly identifies that `buildSyncAuditBody` and `detectSyncAuditMarker` are exported and tested in `sync-tools.test.ts` (lines 462-523 of the test file). The plan's guidance to "delete the corresponding tests" is the right call -- these functions test removed functionality.

### 3. Test Count May Be Higher Than Expected

The plan mentions updating tests for `advance_children`/`advance_parent` in step 10, but `project-number-override.test.ts` also contains test sections for both tools (lines 212-250+). This file tests `projectNumber` override across many tools and will need its advance_children/advance_parent sections updated to test `advance_issue` with direction parameter instead.

## Clarity

Success criteria are specific and testable:
- Automated: `npm run build`, `npm test`, grep for removed tool names, file existence checks, import cleanliness
- Manual: Two concrete `advance_issue` invocations with expected behavior

The "What We're NOT Doing" section correctly delineates phase boundaries with issue cross-references.

## Scope

Appropriately scoped for XS estimate. The work is ~90% mechanical deletion with one straightforward merge. The `advance_issue` merge involves no logic changes, just structural reorganization with a direction dispatch.

## Verdict

**APPROVED** -- The plan is implementable as-is. The dead routing library observation is non-blocking; the implementer can handle it inline or defer to Phase 6.
