---
date: 2026-02-27
github_issue: 366
github_url: https://github.com/cdubiel08/ralph-hero/issues/366
plan_document: thoughts/shared/plans/2026-02-27-GH-0366-ralph-team-post-mortem.md
status: needs-iteration
type: critique
---

# Plan Critique: GH-366 - Add Post-Mortem Reflection Step to ralph-team Shutdown

## Summary

The plan proposes replacing the one-liner shutdown instruction in `ralph-team/SKILL.md` (line 63) with a structured "Shut Down" section that collects session data and writes a post-mortem report before calling `TeamDelete`. The approach is sound and well-scoped, but contains one critical factual error that blocks implementation as written.

## Verdict: NEEDS_ITERATION

### Critical Issue

**`Write` is NOT in `ralph-team/SKILL.md` allowed-tools.**

The plan states at line 31: "Write tool is already in allowed-tools (confirmed at line 6 -- no change needed)." This is incorrect. Line 6 of `ralph-team/SKILL.md` is `- Read`, not `- Write`. The full allowed-tools list is: Read, Glob, Bash, Task, Skill, TeamCreate, TeamDelete, TaskCreate, TaskList, TaskGet, TaskUpdate, SendMessage. `Write` does not appear.

The plan requires the team lead to write a markdown report file. Without `Write` in allowed-tools, the lead cannot create the post-mortem document. The plan must be updated to add `Write` to the allowed-tools frontmatter, and the File Ownership Summary must reflect this additional change (frontmatter modification, not just line 63 replacement).

Note: the research document correctly identifies the issue at line 101: "Lead already has TaskList/TaskGet/Write in its allowed-tools (SKILL.md:14-16)." This is also wrong -- the research propagated the same error. However, this is a plan critique, so the fix belongs in the plan.

### Strengths

1. **Well-scoped single-file change.** Only `ralph-team/SKILL.md` is modified. The "What We're NOT Doing" section is comprehensive and sensible.
2. **Correct ordering.** The plan enforces Write Post-Mortem -> Shut Down Teammates -> Delete Team, which correctly preserves task data before `TeamDelete` destroys it.
3. **Concrete replacement text.** The plan provides the exact markdown to insert, including report template with table structure. No ambiguity about what the implementer should produce.
4. **Testable success criteria.** Four automated grep checks and three manual checks cover the key invariants.
5. **Good pattern reuse.** The idea-hunt "read artifacts -> summarize -> shutdown" pattern is a valid precedent.

### Minor Observations (Non-Blocking)

1. **Report template uses emojis.** The research document template uses checkmark/warning emojis in the Outcome column. The plan's template does not -- this is fine, just noting the divergence is intentional.
2. **Git push to `origin main` is hardcoded.** The report commit instruction says `git push origin main`, but ralph-team sessions may run on feature branches. Consider using `git push` without specifying the branch, or noting the current branch should be used.
3. **`create_status_update` is mentioned in research but omitted from the plan.** This is fine per the "What We're NOT Doing" section (optional GitHub post is excluded), but the plan could briefly note this was deliberately deferred.

## Required Changes

1. Add `- Write` to the allowed-tools list in `ralph-team/SKILL.md` frontmatter (between existing tools, e.g., after `- Read`).
2. Update the plan's File Ownership Summary to reflect that both the frontmatter (allowed-tools) and line 63 are modified.
3. Update the plan's verification checklist to include: "Manual: Write is present in allowed-tools."
4. Remove or correct the line 31 claim that "Write is already in allowed-tools (confirmed at line 6)."
