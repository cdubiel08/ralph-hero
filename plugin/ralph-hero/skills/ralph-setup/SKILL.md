---
description: One-time setup for Ralph GitHub workflow - creates GitHub Project V2 with required custom fields, workflow states, priorities, estimates, and configuration. Use when setting up a new repository for Ralph, configuring GitHub Projects, or troubleshooting missing workflow states.
argument-hint: "[project-number]"
model: opus
env:
  RALPH_COMMAND: "setup"
---

# Ralph GitHub Setup

One-time interactive setup skill for configuring a GitHub repository with the Ralph workflow. Creates a GitHub Project V2 with all required custom fields, views, and configuration.

## Prerequisites

Before running this skill, ensure:

1. **GitHub Token** with required scopes:
   - `project` - For Projects V2 operations
   - `repo` - For issue management
   - `read:org` - For organization-level projects (if using org project)

2. **Environment variables** set:
   - `GITHUB_TOKEN` or `GH_TOKEN` - GitHub Personal Access Token
   - `RALPH_GH_OWNER` - GitHub repository owner (user or org)
   - `RALPH_GH_REPO` - GitHub repository name

## Workflow

### Step 1: Validate Environment

1. Check `GITHUB_TOKEN` or `GH_TOKEN` is set
2. Verify token has required scopes by calling `ralph_hero__health_check`
3. If health check fails, report the error and STOP

### Step 2: Confirm Configuration

Display the detected configuration:

```
Ralph GitHub Setup
==================

GitHub User: [authenticated user from health_check]
Owner: [RALPH_GH_OWNER]
Repository: [RALPH_GH_REPO]
Project Number: [RALPH_GH_PROJECT_NUMBER or "Will create new"]

Proceeding with setup...
```

If `RALPH_GH_OWNER` or `RALPH_GH_REPO` are not set, prompt the user for values.

### Step 3: Create or Verify Project

**If `RALPH_GH_PROJECT_NUMBER` is set:**
1. Call `ralph_hero__get_project` to verify the project exists
2. Verify it has the required custom fields (Workflow State, Priority, Estimate)
3. If fields are missing, report what's missing and offer to create them

**If `RALPH_GH_PROJECT_NUMBER` is NOT set:**
1. Call `ralph_hero__setup_project` to create a new project
2. This creates:
   - **Workflow State** single-select field with 11 options:
     - Backlog, Research Needed, Research in Progress
     - Ready for Plan, Plan in Progress, Plan in Review
     - In Progress, In Review, Done, Human Needed, Canceled
   - **Priority** single-select field with 4 options:
     - P0 (Critical), P1 (High), P2 (Medium), P3 (Low)
   - **Estimate** single-select field with 5 options:
     - XS(1), S(2), M(3), L(4), XL(5)
3. Record the project number from the response

### Step 4: Update Field Colors and Descriptions

Use `ralph_hero__update_field_options` to apply color coding and descriptions to all custom fields (Workflow State, Priority, Estimate). The setup_project tool creates fields with the correct colors, but this step can be used to adjust them after creation.

### Step 4b: Create Default Views (Manual)

**Note**: GitHub's GraphQL API does NOT support creating views programmatically. Instruct the user to create these two views manually in the GitHub UI:

#### 1. Ralph Table View
1. Click **New view** → choose **Table**
2. Name it **Ralph Table**
3. **Group by**: Click the group icon → select **Priority**
4. **Enable sub-issue hierarchy**: Click the kebab menu (⋯) → toggle on **Sub-issues**
5. **Filter**: Set the filter bar to `-has:parent-issue` (shows only top-level issues)
6. **Save** the view

#### 2. Ralph Kanban
1. Click **New view** → choose **Board**
2. Name it **Ralph Kanban**
3. **Set columns**: Click the column header dropdown → select **Workflow State** as the column field
4. **Hide non-active columns**: Set the filter bar to `-workflow-state:Canceled,Done,"Research in Progress","Plan in Progress","Plan in Review"`
5. **Save** the view

This gives two complementary views:
- **Ralph Table** — Priority-grouped hierarchy of all top-level issues with expandable sub-issues
- **Ralph Kanban** — Board showing only actionable workflow columns (Backlog, Research Needed, Ready for Plan, In Progress, In Review, Human Needed)

### Step 5: Store Configuration

Create a local configuration file at `.claude/ralph-hero.local.md` in the current project:

```markdown
---
# Ralph GitHub Plugin - Local Configuration
# Generated by ralph-setup on [date]
# Do not commit this file (add to .gitignore)
---

# Ralph GitHub Configuration

## Project Settings

| Setting | Value |
|---------|-------|
| Owner | [owner] |
| Repository | [repo] |
| Project Number | [number] |
| Project URL | [url] |

## Environment Variables

Set these in your shell profile or `.env` file:

```bash
export RALPH_GH_OWNER="[owner]"
export RALPH_GH_REPO="[repo]"
export RALPH_GH_PROJECT_NUMBER="[number]"
```

## Workflow States

| State | Description |
|-------|-------------|
| Backlog | Untriaged issues |
| Research Needed | Needs research before planning |
| Research in Progress | Currently being researched |
| Ready for Plan | Research complete, ready for planning |
| Plan in Progress | Implementation plan being created |
| Plan in Review | Plan ready for review |
| In Progress | Implementation underway |
| In Review | PR created, awaiting review |
| Done | Completed |
| Human Needed | Requires human intervention |
```

### Step 6: Verify Setup

1. Call `ralph_hero__health_check` to confirm MCP server connectivity
2. Call `ralph_hero__get_project` to confirm project is accessible
3. Report setup status

### Step 7: Final Report

```
Setup Complete
==============

Project: [project title]
URL: [project URL]
Project Number: [number]

Custom Fields:
  - Workflow State: 11 options configured
  - Priority: 4 options configured
  - Estimate: 5 options configured

Views (create manually in GitHub UI):
  - Ralph Table (Table, grouped by Priority, sub-issue hierarchy, -has:parent-issue)
  - Ralph Kanban (Board, Workflow State columns, hidden: Canceled/Done/locked states)

Configuration saved to: .claude/ralph-hero.local.md

Next steps:
1. Set environment variables (see configuration file)
2. Run /ralph-triage to start processing issues
3. Run /ralph-hero for autonomous workflow
```

## Error Handling

- If token validation fails: Report required scopes and how to create a new token
- If project creation fails: Check if user has project creation permissions
- If view creation fails: Continue (views are optional, can be created manually)
- If configuration file write fails: Print the configuration to stdout instead
